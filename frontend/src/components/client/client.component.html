<div class="card">
  <div *ngIf="showAlert" class="alert">
    {{ notificationMessage }}
  </div>
  <img src="/imgs/client.png" alt="Profile Image" class="card-image" />
  <div class="card-content">
    <h3 class="card-name">{{ client.name }}</h3>
    <p class="card-enterprise">{{ client.enterprise }}</p>
    <div class="card-buttons">
      <button class="btn" (click)="editClient(client)">Edit</button>
      <button class="btn" (click)="deleteClient(client.id)">Delete</button>
      <button class="btn" (click)="toggleDirectionsModal()">Directions</button>
    </div>
  </div>
</div>

<!-- Directions Modal -->
<div *ngIf="showDirectionsModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Directions for {{ client.name }}</h2>
      <button class="create-direction-btn" (click)="createNewDirection()">Create New Direction</button>
    </div>

    <table class="table">
      <thead>
        <tr>
          <th>Direction</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let direction of clientDirections">
          <td>{{ direction.address }}</td>
          <td>
            <button class="btn btn-edit" (click)="editDirection(direction)">Edit</button>
            <button class="btn btn-remove" (click)="removeDirection(direction.id)">Remove</button>
          </td>
        </tr>
      </tbody>
    </table>

    <button class="btn" (click)="toggleDirectionsModal()">Close</button>
  </div>
</div>


<!-- Modal for Create Direction -->
<div *ngIf="showCreateDirectionModal" class="modal">
  <div class="modal-content">
    <h2>Create New Direction</h2>
    <form (ngSubmit)="createDirection()">
      <div class="form-group">
        <label for="address">Address:</label>
        <input
          id="address"
          type="text"
          [(ngModel)]="newDirection.address"
          name="address"
          required
        />
      </div>
      <button type="submit">Create</button>
      <button type="button" (click)="toggleCreateDirectionModal()">Cancel</button>
    </form>
  </div>
</div>

<div *ngIf="showEditDirectionModal" class="modal">
  <div class="modal-content">
    <h2>Edit Direction</h2>
    <form (ngSubmit)="updateDirection()">
      <div class="form-group">
        <label for="edit-address">Address:</label>
        <input
          id="edit-address"
          type="text"
          [(ngModel)]="editDirectionData.address"
          name="edit-address"
          required
        />
      </div>
      <button type="submit">Save Changes</button>
      <button type="button" (click)="toggleEditDirectionModal()">Cancel</button>
    </form>
  </div>
</div>

<!-- Modal for Update Client -->
<div *ngIf="showModal" class="modal">
  <div class="modal-content">
    <h2>Update Client</h2>
    <form (ngSubmit)="updateClient()">
      <div class="form-group">
        <label for="name">Name:</label>
        <input
          id="name"
          type="text"
          [(ngModel)]="currentClient.name"
          name="name"
          required
        />
      </div>
      <div class="form-group">
        <label for="enterprise">Enterprise:</label>
        <input
          id="enterprise"
          type="text"
          [(ngModel)]="currentClient.enterprise"
          name="enterprise"
          required
        />
      </div>
      <button type="submit">Update</button>
      <button type="button" (click)="toggleModal()">Cancel</button>
    </form>
  </div>
</div>
